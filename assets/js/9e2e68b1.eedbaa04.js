"use strict";(self.webpackChunkcheckout_sdk_java_docs=self.webpackChunkcheckout_sdk_java_docs||[]).push([[271],{3905:function(e,t,n){n.d(t,{Zo:function(){return c},kt:function(){return m}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var u=a.createContext({}),l=function(e){var t=a.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=l(e.components);return a.createElement(u.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,u=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),d=l(n),m=r,y=d["".concat(u,".").concat(m)]||d[m]||p[m]||o;return n?a.createElement(y,i(i({ref:t},c),{},{components:n})):a.createElement(y,i({ref:t},c))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=d;var s={};for(var u in t)hasOwnProperty.call(t,u)&&(s[u]=t[u]);s.originalType=e,s.mdxType="string"==typeof e?e:r,i[1]=s;for(var l=2;l<o;l++)i[l]=n[l];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},6357:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return s},contentTitle:function(){return u},metadata:function(){return l},toc:function(){return c},default:function(){return d}});var a=n(7462),r=n(3366),o=(n(7294),n(3905)),i=["components"],s={id:"klarna",title:"klarna"},u=void 0,l={unversionedId:"api/alternative-payments/klarna",id:"api/alternative-payments/klarna",isDocsHomePage:!1,title:"klarna",description:"More information on this topic can be found in the official docs.",source:"@site/docs/api/alternative-payments/klarna.md",sourceDirName:"api/alternative-payments",slug:"/api/alternative-payments/klarna",permalink:"/checkout-sdk-java/docs/api/alternative-payments/klarna",version:"current",frontMatter:{id:"klarna",title:"klarna"},sidebar:"tutorialSidebar",previous:{title:"ideal",permalink:"/checkout-sdk-java/docs/api/alternative-payments/ideal"},next:{title:"oxxo",permalink:"/checkout-sdk-java/docs/api/alternative-payments/oxxo"}},c=[{value:"Request a Klarna payment",id:"request-a-klarna-payment",children:[]},{value:"Create a credit session",id:"create-a-credit-session",children:[]},{value:"Get a credit session",id:"get-a-credit-session",children:[]},{value:"Capture the payment session",id:"capture-the-payment-session",children:[]},{value:"Void a payment",id:"void-a-payment",children:[]}],p={toc:c};function d(e){var t=e.components,n=(0,r.Z)(e,i);return(0,o.kt)("wrapper",(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"More information on this topic can be found in the ",(0,o.kt)("a",{parentName:"p",href:"https://docs.checkout.com/payments/payment-methods/invoice-and-pay-later/klarna"},"official docs"),"."),(0,o.kt)("h2",{id:"request-a-klarna-payment"},"Request a Klarna payment"),(0,o.kt)("p",null,"Use the details below to set up your request."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-java"},'KlarnaSource source = KlarnaSource.builder()\n        .authorizationToken("b4bd3423-24e3")\n        .locale("en-GB")\n        .purchaseCountry(CountryCode.GB)\n        .taxAmount(0)\n        .billingAddress(KlarnaSource.BillingAddress.builder()\n            .givenName("John")\n            .familyName("Doe")\n            .email("johndoe@email.com")\n            .title("Mr")\n            .streetAddress("13 New Burlington St")\n            .streetAddress2("Apt 214")\n            .postalCode("W13 3BG")\n            .city("London")\n            .phone("01895808221")\n            .country(CountryCode.GB)\n            .build())\n        .customer(KlarnaSource.Customer.builder()\n            .dateOfBirth("1970-01-01")\n            .gender("male")\n            .build())\n        .products(List.of(KlarnaProduct.builder()\n            .name("Battery Power Pack")\n            .quantity(1)\n            .unitPrice(1000)\n            .taxRate(0)\n            .totalAmount(1000)\n            .totalTaxAmount(0)\n            .build()))\n        .build();\n\nPaymentRequest<KlarnaSource> request = PaymentRequest.klarna(source, Currency.EUR, 1000L);\n\nPaymentResponse response = api.paymentsClient().requestAsync(request).get();\n')),(0,o.kt)("h2",{id:"create-a-credit-session"},"Create a credit session"),(0,o.kt)("p",null,"First, you need to create a Klarna session for your customer."),(0,o.kt)("p",null,"You should provide all known order details at this stage to enable pre-assessment and to personalize the experience for your customer."),(0,o.kt)("p",null,"If, however, your checkout process is designed in a way that you don't have all the customer's details at this point, you can add them later on when you load the Klarna widget or when you come to authorize the payment."),(0,o.kt)("p",null,"When you create a session, you will receive the available payment_method_categories, a session_id and a client_token. You can use the session_id to update the session using our API, and the client_token should be passed to the browser. A session is valid for 48 hours."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-java"},'CreditSessionRequest creditSessionRequest = CreditSessionRequest.builder()\n        .purchaseCountry(CountryCode.GB)\n        .currency(Currency.GBP)\n        .locale("en-GB")\n        .amount(1000)\n        .taxAmount(0)\n        .products(List.of(KlarnaProduct.builder()\n            .name("Battery Power Pack")\n            .quantity(1)\n            .unitPrice(1000)\n            .taxRate(0)\n            .totalAmount(1000)\n            .totalTaxAmount(0)\n            .build()))\n        .build();\n\napi.klarnaClient().createCreditSession(creditSessionRequest);\n')),(0,o.kt)("h2",{id:"get-a-credit-session"},"Get a credit session"),(0,o.kt)("p",null,"You will receive the available payment_method_categories, a session_id and a client_token. You can use the session_id to update the session using our API, and the client_token should be passed to the browser. A session is valid for 48 hours."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-java"},'api.klarnaClient().getCreditSession("session_id");\n')),(0,o.kt)("h2",{id:"capture-the-payment-session"},"Capture the payment session"),(0,o.kt)("p",null,"Once you've shipped your goods to the customer, you can capture the payment. If, however, you provide the customer with immediate access to your product (e.g., you provide them with an online service), you can capture the payment as soon as the order is placed."),(0,o.kt)("p",null,"If you're shipping goods, it's a good idea to include the shipping_info for transparency as Klarna will include it in the correspondence with your customer."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-java"},'OrderCaptureRequest captureRequest = OrderCaptureRequest.builder()\n        .amount(1000L)\n        .reference("ORD-5023-4E89")\n        .metadata(null)\n        .klarna(OrderCaptureRequest.Klarna.builder()\n            .description("Your order with Checkout.com")\n            .products(List.of(KlarnaProduct.builder()\n                .name("Battery Power Pack")\n                .quantity(1)\n                .unitPrice(1000)\n                .taxRate(0)\n                .totalAmount(1000)\n                .totalTaxAmount(0)\n                .build()))\n            .build())\n        .shippingInfo(OrderCaptureRequest.ShippingInfo.builder()\n            .shippingCompany("DHL US")\n            .shippingMethod("PickUpStore")\n            .trackingNumber("63456415674545679874")\n            .trackingUri("http://shipping.example/findmypackage?63456415674545679874")\n            .returnShippingCompany("DHL US")\n            .returnTrackingNumber("93456415674545679888")\n            .returnTrackingUri("http://shipping.example/findmypackage?93456415674545679888")\n            .build())\n        .shippingDelay(0L)\n        .build();\n\napi.klarnaClient().capturePayment("payment_id", captureRequest);\n')),(0,o.kt)("h2",{id:"void-a-payment"},"Void a payment"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-java"},'VoidRequest voidRequest = VoidRequest.builder()\n        .reference("ORD-5023-4E89")\n        .build();\n\napi.klarnaClient().voidCapture("payment_id", voidRequest);\n')))}d.isMDXComponent=!0}}]);